import{e as N,i as V,A as B,p as G,r as U,a as j,n as u,c as x,d as q,b as g,w as A,o as Y,t as Q}from"./iframe-DCIv5-Z3.js";import{e as J,C as K,M as C,S as tt,P as et,W as it,a as S,E as st,b as nt,c as at,A as ot,D as $,G as z,T as P,L as b,d as O,f as rt,g as R,h as E,i as k,j as F,N as lt,k as ht,l as ct,m as H,B as dt,V as f,n as w,Q as Z,o as X,p as I}from"./SSAARenderPass-B9XjVuCJ.js";import"./preload-helper-PPVm8Dsz.js";let pt;function gt(e){return(t,s)=>J(t,s,{get(){return(this.renderRoot??(pt??=document.createDocumentFragment())).querySelectorAll(e)}})}const mt=N(class extends V{constructor(){super(...arguments),this.key=B}render(e,t){return this.key=e,t}update(e,[t,s]){return t!==this.key&&(G(e),this.key=t),s}}),ut='@keyframes slideInRight{0%{opacity:0;transform:translate(30px)}to{opacity:1;transform:translate(0)}}:host{display:block;width:100%;position:relative;font-family:Poppins,sans-serif}.wrapper{position:relative;width:100%;max-width:1440px;margin:0 auto}.model-wrapper{position:relative;width:100%;height:100%;z-index:10}.vh-microsite-interactive-model{width:600px;height:600px;max-width:100%;max-height:100%;position:absolute;top:0;left:50%;transform:translate(-50%);overflow:hidden}.vh-microsite-interactive-model canvas{display:block;width:100%!important;height:100%!important}.section{width:100%;min-height:100vh;scroll-snap-align:start;position:relative;z-index:1;pointer-events:none}.content-overlay{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:20}.controls-list{position:absolute;top:300px;left:40px;transform:translateY(-50%);display:flex;flex-direction:column;gap:16px;z-index:10;opacity:0;pointer-events:none;transition:opacity .6s ease}.controls-list.visible{opacity:1;pointer-events:auto}.control-item{background:transparent;border:none;padding:2px 25px 2px 2px;border-radius:50px;display:flex;align-items:center;gap:8px;cursor:pointer;transition:all .3s ease;text-align:left;outline:none;width:fit-content}.control-item .icon{width:24px;height:24px;display:flex;align-items:center;justify-content:center;opacity:1;transition:filter .3s ease}.control-item .icon img{width:100%;height:100%;display:block}.control-item .label{font-family:var(--vh-font-poppins);font-size:16px;font-style:normal;font-weight:400;line-height:1.5;color:#002c4e;opacity:.7;transition:color .3s ease,opacity .3s ease}.control-item:hover .label{opacity:1}.control-item.active{background-color:#76b729}.control-item.active .icon{filter:brightness(0) invert(1)}.control-item.active .label{color:#fff;opacity:1;font-weight:600}.controls{position:absolute;top:300px;left:20px;transform:translateY(-50%);display:flex;flex-direction:column;gap:12px;z-index:10;pointer-events:none}.controls button{pointer-events:auto;padding:12px 24px;background:#ffffffe6;border:1px solid rgba(0,0,0,.1);border-radius:8px;font-family:Poppins,sans-serif;font-size:14px;color:#333;cursor:pointer;transition:all .2s ease;box-shadow:0 4px 6px #0000000d;font-weight:500;text-align:center;width:160px}.controls button:hover{background:#fff;transform:translate(4px);box-shadow:0 6px 12px #0000001a}.controls button:active{transform:translate(2px);box-shadow:0 2px 4px #0000000d}.info-card{position:absolute;top:240px;right:40px;transform:translateY(-50%);width:261px;background-color:#f0fdf4;border-radius:12px;padding:24px;box-shadow:0 4px 20px #0000000d;z-index:10;font-family:Poppins,sans-serif;opacity:0;pointer-events:none;transition:none}.info-card.visible{opacity:1;pointer-events:auto;transition:opacity .6s ease}.info-card .card-header{display:flex;align-items:center;gap:10px;margin-bottom:12px}.info-card .card-header img{width:20px;height:20px;display:block}.info-card .card-header h3{margin:0;font-family:var(--vh-font-poppins);font-size:18px;font-style:normal;font-weight:400;line-height:1.2;font-weight:700;color:#002c4e}.info-card p{margin:0;font-family:var(--vh-font-poppins);font-size:14px;font-style:normal;font-weight:300;line-height:1.3;color:#334155}.section-overlays{position:absolute;inset:0;pointer-events:none;z-index:15}.section-overlay{position:absolute;inset:0;width:100%;height:100%}.callout-overlay{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:15;opacity:0}@keyframes drawLine{to{stroke-dashoffset:0}}.callout-overlay .single-callout-dot{opacity:0}.callout-overlay.visible{opacity:1;transition:opacity .4s ease}.callout-overlay.visible .single-callout-line{opacity:1;animation:drawLine .5s ease-out forwards}.callout-overlay.visible .single-callout-dot{animation:fadeIn .3s ease-out forwards;animation-delay:.4s}.callout-overlay path{transition:d .1s linear}.header-overlay{grid-area:stack;position:relative;margin:0 auto;top:auto;bottom:auto;width:100%;max-width:900px;z-index:20;text-align:center;display:flex;flex-direction:column;align-items:center;gap:16px;pointer-events:none;transition:none}.header-overlay.has-body{top:auto;margin-top:-40px}.header-overlay .title{margin:0;color:var(--VH-Navy, #002C4E);text-align:center;font-family:Feature Display Condensed,sans-serif;font-size:var(--font-size-6XL, 62px);font-style:normal;font-weight:400;line-height:100%;opacity:0;animation:slideInRight .8s ease-out forwards;animation-delay:0ms}.header-overlay .title em{font-family:Feature Display Condensed,sans-serif;font-size:var(--font-size-6XL, 62px);font-style:italic;font-weight:700;line-height:100%;color:var(--VH-Navy, #002C4E)}.header-overlay .features{display:flex;align-items:center;justify-content:center;gap:24px;margin-top:8px}.header-overlay .features .feature-item{display:flex;align-items:center;gap:8px}.header-overlay .features .feature-item .check-icon{display:flex;align-items:center;justify-content:center}.header-overlay .features .feature-item span{font-family:var(--vh-font-poppins);font-size:16px;font-style:normal;font-weight:400;line-height:1.5;color:#002c4e}.header-overlay .features .feature-item{opacity:0;animation:slideInRight .8s ease-out forwards;animation-delay:.3s}.header-overlay .body-text{margin:0;font-family:var(--vh-font-poppins);font-style:normal;font-weight:400;line-height:1.5;font-size:16px;color:var(--VH-Navy, #002C4E);max-width:900px;text-align:center;opacity:0;animation:slideInRight .8s ease-out forwards;animation-delay:.6s}.header-overlay .cta-link{pointer-events:auto;display:flex;align-items:center;gap:8px;text-decoration:none;color:#002c4e;font-family:var(--vh-font-poppins);font-size:18px;font-style:normal;font-weight:400;line-height:1.2;font-weight:600;transition:opacity .2s ease;opacity:0;animation:slideInRight .8s ease-out forwards;animation-delay:.9s}.header-overlay .cta-link:hover{opacity:.8}.header-overlay.last-section .title{animation-delay:1.5s}.header-overlay.last-section .features .feature-item{animation-delay:1.8s}.header-overlay.last-section .body-text{animation-delay:2.1s}.header-overlay.last-section .cta-link{animation-delay:2.4s}.header-overlay.exiting{pointer-events:none;animation:fadeOut .8s ease-out forwards;animation-delay:.8s;z-index:10}.header-overlay.exiting .title,.header-overlay.exiting .features .feature-item,.header-overlay.exiting .body-text,.header-overlay.exiting .cta-link{animation:none;opacity:1;transform:none}.header-stack{display:grid;grid-template-areas:"stack";width:100%;min-height:186px;align-items:end}@keyframes fadeOut{0%{opacity:1}to{opacity:0}}.header-area{position:sticky;top:0;z-index:20;pointer-events:none;width:100%;padding-top:60px}.interactive-area{position:sticky;top:calc(var(--header-height, 0px) + 60px);height:calc(100vh - var(--header-height, 0px) - 60px);width:100%;z-index:10}.multi-callout-group{opacity:0}.callout-overlay.visible .multi-callout-group{animation:fadeIn .6s ease-out forwards;animation-delay:calc(var(--i, 0) * .4s + .2s)}.multi-callout-labels{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:20}.callout-label{display:flex;flex-direction:row;align-items:center;gap:8px;color:#002c4e;white-space:nowrap;opacity:0;animation:fadeIn .6s ease-out forwards;animation-delay:calc(var(--i, 0) * .4s + .2s)}.callout-label.left{justify-content:flex-end;padding-right:12px}.callout-label.right{justify-content:flex-start;padding-left:12px}.callout-label .number{color:var(--VH-Navy, #002C4E);font-family:IBM Plex Sans,sans-serif;font-weight:275;font-size:52px;font-style:normal;line-height:100%;letter-spacing:-2.08px;margin-bottom:0}.callout-label .text{color:var(--VH-Navy, #002C4E);font-family:var(--font-family-family-2, Poppins);font-size:var(--font-size-M, 16px);font-style:normal;font-weight:400;line-height:120%;text-align:inherit;white-space:normal;max-width:min-content}@keyframes fadeIn{to{opacity:1}}',v=[{label:"Intro",view:"front",textAngle:0,modelRotationY:0,description:"",hidden:!0,isIdle:!0,header:{title:"<em>Truth</em> Powers <em>Better Health</em>",features:["Full Disclosure, Always.","No Proprietary Blends, Ever."],body:"Clean, science-backed supplements—so you can stop stressing and start living."}},{label:"Full Disclosure Labelling",view:"back",textAngle:0,modelRotationY:180,highlightWidth:.6,description:"Explore your favorite products—from ingredient functions and sources to version numbers and scientific support. Every label has a story, and we’re not keeping it to ourselves, even if that means sharing our formulas with the world.",callout:{start:{x:35,y:-110},horizontalLength:230,cardYOffset:90},header:{title:"<em>What’s</em> Inside <em>& Why</em>"}},{label:"No Proprietary Blends",view:"front",textAngle:290,highlightWidth:.5,modelRotationY:220,description:"At Vibrant Health, we never use proprietary blends because we believe you deserve to know exactly what’s in your supplements. Full transparency empowers you to make confident, informed choices about your health.",callout:{start:{x:9,y:79},horizontalLength:200,cardYOffset:80},header:{title:"<em>What’s</em> Inside <em>& Why</em>"}},{label:"Non GMO Certified",view:"left",textAngle:230,highlightWidth:.5,modelRotationY:0,description:"Our Non-GMO Certification reflects our commitment to clean, responsibly sourced ingredients. It ensures what you’re putting into your body is as close to nature as possible, without genetic modification.",callout:{start:{x:6,y:-35},horizontalLength:200,cardYOffset:30},header:{title:"<em>What’s</em> Inside <em>& Why</em>"}},{label:"Clinically Formulated",view:"left",textAngle:170,highlightWidth:.5,modelRotationY:350,description:"Our products are clinically formulated using science-backed ingredients and research. Green Vibrance has been continuously improved more than 20 times since 1992. Every refinement is driven by evolving research to deliver real, measurable results you can trust.",callout:{start:{x:32,y:105},horizontalLength:200,cardYOffset:80},header:{title:"<em>What’s</em> Inside <em>& Why</em>"}},{label:"Dietary Supplement",view:"right",textAngle:107,modelRotationY:250,highlightWidth:.5,description:"At Vibrant Health, our products are dietary supplements designed to support your overall wellness. Each formula complements a healthy lifestyle, helping you feel your best every day.",callout:{start:{x:7,y:150},horizontalLength:200,cardYOffset:50},header:{title:"<em>What’s</em> Inside <em>& Why</em>"}},{label:"Made in USA",view:"right",textAngle:55,modelRotationY:0,highlightWidth:.5,description:"Our products are proudly made in the USA using the highest-quality ingredients sourced from trusted partners around the world. This approach ensures rigorous standards, exceptional quality, and globally informed formulations.",callout:{start:{x:7,y:-90},horizontalLength:250,cardYOffset:30},header:{title:"<em>What’s</em> Inside <em>& Why</em>"}},{label:"Top View",view:"top",textAngle:0,description:"",hidden:!0,header:{title:"<em>Dynamic</em> by Design",body:"Science doesn’t stand still, and neither should your health. Every 18–24 months, we collaborate with scientists and suppliers to review the latest research and upgrade our products, something we call formula obsolescence. That’s why you’ll always see version numbers on our packaging—it’s our promise to keep evolving.",ctaLabel:"Track Our Formula Updates",ctaUrl:"#"},multiCallouts:[{label:"14",subLabel:"Anti-oxidants",start:{x:-50,y:-60},end:{x:-210,y:-275},horizontalLength:50,align:"left"},{label:"25",subLabel:"Billion Probiotics",start:{x:70,y:-60},end:{x:240,y:-240},horizontalLength:50,align:"right"},{label:"65",subLabel:"Billion Probiotics",start:{x:20,y:40},end:{x:88,y:320},horizontalLength:70,align:"right"}]}],ft=`
    varying vec2 vUv;
    void main() {
        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
`,yt=`
    uniform sampler2D map;
    uniform float uHighlightAngle; // Angle to highlight (radians), relative to texture center
    uniform vec3 uHighlightColor;
    uniform float uShowHighlight; // 0.0 = no highlight, 1.0 = highlight
    uniform vec3 uBaseColor; // Base color tint for the texture
    uniform float uHighlightWidth; // Width of highlight in radians
    varying vec2 vUv;

    // Constants
    const float PI = 3.14159265;
    const float TWO_PI = 6.28318530;

    void main() {
        vec4 texColor = texture2D(map, vUv);
        
        // Only affect non-transparent pixels
        if (texColor.a < 0.1) discard; 

        // Calculate angle of current pixel
        vec2 centered = vUv - 0.5;
        float angle = atan(centered.y, centered.x); // -PI to PI
        
        // Calculate distance to highlight angle
        float dist = abs(angle - uHighlightAngle);
        if (dist > PI) dist = TWO_PI - dist; // Wrap around

        vec3 finalColor = texColor.rgb * uBaseColor; // Apply base color tint
        
        // If within width, use highlight color
        if (uShowHighlight > 0.5 && dist < uHighlightWidth) {
            finalColor = uHighlightColor;
        }

        gl_FragColor = vec4(finalColor, texColor.a);
    }
`,vt={name:"GammaCorrectionShader",uniforms:{tDiffuse:{value:null}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 tex = texture2D( tDiffuse, vUv );

			gl_FragColor = sRGBTransferOETF( tex );

		}`};class xt{constructor(t,s){this.rawModel=null,this.textRingMesh=null,this.ringsGroup=null,this.powderMesh=null,this.clock=new K,this.mixer=null,this.animationAction=null,this.capMesh=null,this.capMaxY=0,this.capStartY=0,this.pendingRotationIndex=-1,this.pendingRingTriggered=!1,this.pendingModelTriggered=!1,this.targetTextRotation=39*Math.PI/180,this.textRotationOffset=39*Math.PI/180,this.isAutoRotating=!0,this.targetQuaternion=null,this.targetZoom=1,this.baseScale=1,this.currentModelZoom=1,this.animationId=null,this.animationTimeout=null,this.currentSectionIndex=-1,this.isLongSpin=!1,this.targetPowderOpacity=0,this.powderTimeout=null,this.ambientLight=null,this.keyLight=null,this.fillLight=null,this.backLight=null,this.handleResize=()=>{if(!this.container||!this.camera||!this.renderer)return;const i=this.container.clientWidth,n=this.container.clientHeight;this.camera.aspect=i/n,this.camera.updateProjectionMatrix(),this.renderer.setSize(i,n),this.composer.setSize(i,n)},this.animate=()=>{this.animationId=requestAnimationFrame(this.animate);const i=this.clock.getDelta();if(this.mixer&&(this.mixer.update(i),this.capMesh&&this.capMesh.material instanceof C)){const r=this.capMesh.position.y,a=this.capStartY,o=this.capMaxY>a?this.capMaxY:a+1,l=a+(o-a)*.05,c=a+(o-a)*.5,p=X.clamp((r-l)/(c-l),0,1);if(this.capMesh.material.opacity=1-p,this.pendingRotationIndex!==-1){const m=l+(c-l)*.1;!this.pendingRingTriggered&&r>=m&&(this.updateRingTarget(this.pendingRotationIndex),this.pendingRingTriggered=!0);const y=c;!this.pendingModelTriggered&&r>=y&&(this.updateModelTarget(this.pendingRotationIndex),this.pendingModelTriggered=!0),this.pendingRingTriggered&&this.pendingModelTriggered&&(this.pendingRotationIndex=-1)}}if(this.modelContainer){if(this.isAutoRotating)this.modelContainer.rotation.y+=.3*i;else if(this.targetQuaternion){const r=1-Math.exp(-5*i);this.modelContainer.quaternion.slerp(this.targetQuaternion,r)}}const n=this.targetZoom-this.currentModelZoom;if(Math.abs(n)>.001){const r=1-Math.exp(-3*i);if(this.currentModelZoom+=n*r,this.modelContainer&&this.baseScale>0){const a=this.baseScale*this.currentModelZoom;this.modelContainer.scale.set(a,a,a)}}if(this.textRingMesh)if(this.isAutoRotating)this.textRingMesh.rotation.z-=.12*i;else{let r=this.textRingMesh.rotation.z,a=this.targetTextRotation-r;if(!this.isLongSpin){for(;a>Math.PI;)a-=Math.PI*2;for(;a<-Math.PI;)a+=Math.PI*2}const o=this.isLongSpin?2:5,l=1-Math.exp(-o*i);this.textRingMesh.rotation.z+=a*l}if(this.powderMesh){let r=this.targetPowderOpacity;const a=this.powderMesh.material.opacity,o=r-a;if(Math.abs(o)>.001){const l=1-Math.exp(-2*i);this.powderMesh.material.opacity+=o*l}}this.composer.render()},this.container=t,this.init(s)}init(t){const s=this.container.clientWidth*2,i=this.container.clientHeight*2;this.scene=new tt;const n=s/i,r=45;this.camera=new et(r,n,.1,100),this.camera.position.set(0,0,11),this.camera.lookAt(0,0,0),this.renderer=new it({antialias:!0,alpha:!0}),this.renderer.setSize(s,i),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.outputColorSpace=S,this.container.appendChild(this.renderer.domElement),this.composer=new st(this.renderer);const a=new nt(this.scene,this.camera,0,0);a.sampleLevel=2,this.composer.addPass(a);const o=new at(vt);this.composer.addPass(o),this.composer.setSize(s,i),this.composer.setPixelRatio(window.devicePixelRatio),this.ambientLight=new ot(16777215,1.2),this.scene.add(this.ambientLight),this.keyLight=new $(16777215,2),this.keyLight.position.set(-10,10,10),this.scene.add(this.keyLight),this.fillLight=new $(16777215,.6),this.fillLight.position.set(10,5,10),this.scene.add(this.fillLight),this.backLight=new $(16777215,1),this.backLight.position.set(0,5,-10),this.scene.add(this.backLight),this.modelContainer=new z,this.scene.add(this.modelContainer),this.loadRings(),this.loadPowder(),this.loadModel(t),this.animate(),window.addEventListener("resize",this.handleResize)}updateLights(t,s,i,n,r,a,o){this.ambientLight&&(this.ambientLight.intensity=t),this.keyLight&&(this.keyLight.intensity=s,this.keyLight.position.copy(i)),this.fillLight&&(this.fillLight.intensity=n,this.fillLight.position.copy(r)),this.backLight&&(this.backLight.intensity=a,this.backLight.position.copy(o))}loadRings(){const t=new P;this.ringsGroup=new z,[{path:"/images/vh-microsite-model-outer-ring.svg",size:10.6,isText:!1},{path:"/images/vh-microsite-model-text-v2.svg",size:10,isText:!0},{path:"/images/vh-microsite-model-inner-ring.svg",size:9.4,isText:!1}].forEach(i=>{t.load(i.path,n=>{n.colorSpace=S,n&&(n.anisotropy=this.renderer.capabilities.getMaxAnisotropy(),n.minFilter=b,n.magFilter=b);const r=new O(i.size,i.size);let a;if(i.isText){a=new rt({uniforms:{map:{value:n},uHighlightAngle:{value:0},uHighlightColor:{value:new E(11342)},uShowHighlight:{value:0},uBaseColor:{value:new E(11184810)},uHighlightWidth:{value:.8}},vertexShader:ft,fragmentShader:yt,transparent:!0,side:R,depthWrite:!1});const o=new k(r,a);this.textRingMesh=o,this.textRingMesh.rotation.z=this.targetTextRotation,this.updateHighlightUniform(-1),this.ringsGroup.add(o)}else{a=new F({map:n,transparent:!0,side:R,depthWrite:!1,color:11184810});const o=new k(r,a);this.ringsGroup.add(o)}})}),this.ringsGroup.position.y=0,this.ringsGroup.position.z=-2,this.scene.add(this.ringsGroup)}loadPowder(){new P().load("/images/vh-microsite-green-powder-v2.png",s=>{s.colorSpace=S,s.anisotropy=this.renderer.capabilities.getMaxAnisotropy(),s.minFilter=b,s.magFilter=b;const i=new O(5,5),n=new F({map:s,transparent:!0,opacity:0,side:R,depthWrite:!1,blending:lt});this.powderMesh=new k(i,n),this.powderMesh.position.set(.06,-.05,3.77),this.scene.add(this.powderMesh)})}loadModel(t){new ht().load(t,i=>{if(this.rawModel=i.scene,i.animations&&i.animations.length>0){this.mixer=new ct(this.rawModel);const l=i.animations[0];this.animationAction=this.mixer.clipAction(l),this.animationAction.setLoop(H,1),this.animationAction.clampWhenFinished=!0,this.animationAction.timeScale=4,l.tracks.forEach(c=>{if(c.name.toLowerCase().includes(".position"))for(let p=1;p<c.values.length;p+=3)c.values[p]>this.capMaxY&&(this.capMaxY=c.values[p])})}const n=new dt().setFromObject(this.rawModel),r=n.getSize(new f),a=n.getCenter(new f);this.rawModel.position.sub(a),this.modelContainer.add(this.rawModel);const o=Math.max(r.x,r.y,r.z);if(o>0){const l=6/o;this.baseScale=l,this.modelContainer.scale.set(l,l,l)}this.rawModel.traverse(l=>{if(l instanceof k){l.name.toLowerCase().includes("cap")&&(this.capMesh=l,this.capMesh.material instanceof C&&(this.capMesh.material.transparent=!0,this.capMesh.material.opacity=1,this.capStartY=this.capMesh.position.y));const c=l.material;if(c){const p=m=>{m&&(m.anisotropy=this.renderer.capabilities.getMaxAnisotropy(),m.minFilter=b,m.magFilter=b,m.needsUpdate=!0)};p(c.map),p(c.emissiveMap),p(c.roughnessMap),p(c.metalnessMap),p(c.normalMap),c.normalMap&&(c.normalMap.flipY=!1),p(c.alphaMap),p(c.aoMap),p(c.clearcoatMap),p(c.clearcoatRoughnessMap),p(c.transmissionMap)}}})},void 0,i=>{console.error("An error happened loading the GLB",i)})}setSection(t){if(this.isAutoRotating=!1,!this.modelContainer)return;const s=t===v.length-1,i=this.currentSectionIndex===v.length-1;if(s){if(this.animationAction){this.animationAction.reset(),this.animationAction.timeScale=8,this.animationAction.play(),this.pendingRotationIndex=t,this.pendingRingTriggered=!1,this.pendingModelTriggered=!1,this.animationTimeout&&(clearTimeout(this.animationTimeout),this.animationTimeout=null),this.updateHighlightUniform(-1);return}}else i?(this.animationAction&&(this.animationAction.paused=!1,this.animationAction.timeScale=-6,this.animationAction.setLoop(H,1),this.animationAction.clampWhenFinished=!0,this.animationAction.play()),this.pendingRotationIndex=-1):(this.animationAction&&(this.animationAction.stop(),this.capMesh&&(this.capMesh.position.y=this.capStartY,this.capMesh.material instanceof C&&(this.capMesh.material.opacity=1))),this.pendingRotationIndex=-1);this.currentSectionIndex=t,this.rotateToSection(t)}rotateToSection(t){this.updateModelTarget(t),this.updateRingTarget(t)}updateModelTarget(t){if(!this.modelContainer)return;const s=v[t];if(s.isIdle){this.isAutoRotating=!0,this.updateHighlightUniform(-1);return}const i=s.view,r=new w().setFromQuaternion(this.modelContainer.quaternion,"YXZ").y,a=new Z().setFromAxisAngle(new f(0,1,0),r),o=new Z;if(s.modelRotationY!==void 0){const l=X.degToRad(s.modelRotationY);o.setFromEuler(new w(0,l,0))}else switch(i){case"front":o.setFromEuler(new w(0,0,0));break;case"back":o.setFromEuler(new w(0,Math.PI,0));break;case"left":o.setFromEuler(new w(0,-Math.PI/2,0));break;case"right":o.setFromEuler(new w(0,Math.PI/2,0));break;case"top":o.setFromAxisAngle(new f(1,0,0),Math.PI/2).multiply(a);break;case"bottom":o.setFromAxisAngle(new f(1,0,0),-Math.PI/2).multiply(a);break}this.targetQuaternion=o,i==="top"||i==="bottom"||t===v.length-1?(this.updateHighlightUniform(-1),this.targetZoom=1.25):(this.updateHighlightUniform(t),this.targetZoom=1),this.powderTimeout&&(clearTimeout(this.powderTimeout),this.powderTimeout=null),i==="top"?(this.targetPowderOpacity=0,this.powderTimeout=window.setTimeout(()=>{this.targetPowderOpacity=1},750),this.ringsGroup&&(this.ringsGroup.position.z=3.8,this.ringsGroup.scale.set(.55,.55,.55))):(this.targetPowderOpacity=0,this.powderMesh&&(this.powderMesh.material.opacity=0),this.ringsGroup&&(this.ringsGroup.position.z=-2,this.ringsGroup.scale.set(1,1,1)))}updateRingTarget(t){if(!this.textRingMesh)return;const s=v[t];if(s.view==="top")this.targetTextRotation=this.textRingMesh.rotation.z-Math.PI,this.isLongSpin=!0;else{const i=s.textAngle*Math.PI/180;this.targetTextRotation=-i+this.textRotationOffset,this.isLongSpin=!1}}updateHighlightUniform(t){if(!this.textRingMesh)return;const s=this.textRingMesh.material;if(!s.uniforms)return;if(t<0){s.uniforms.uShowHighlight.value=0;return}s.uniforms.uShowHighlight.value=1;const i=v[t];s.uniforms.uHighlightWidth.value=i.highlightWidth??.8;const n=i.textAngle*Math.PI/180,r=this.textRotationOffset;let a=Math.PI/2+n-r;for(;a>Math.PI;)a-=Math.PI*2;for(;a<-Math.PI;)a+=Math.PI*2;s.uniforms.uHighlightAngle.value=a}dispose(){this.animationId&&cancelAnimationFrame(this.animationId),window.removeEventListener("resize",this.handleResize),this.renderer.dispose()}}var bt=Object.defineProperty,wt=Object.getOwnPropertyDescriptor,d=(e,t,s,i)=>{for(var n=i>1?void 0:i?wt(t,s):t,r=e.length-1,a;r>=0;r--)(a=e[r])&&(n=(i?a(t,s,n):a(n))||n);return i&&n&&bt(t,s,n),n};const _=50,W=100,Lt=400,kt=1100,Mt=1e3;let h=class extends q{constructor(){super(...arguments),this.modelPath="/3d-models/vibranthealth_bottle_v3/VibrantHealth_Anim_JustBottle_Fix.glb",this.currentSectionIndex=0,this.controlsVisible=!1,this.sectionCallouts={},this.sectionMultiCallouts={},this.isCalloutFading=!1,this.isCardVisible=!1,this.ambientIntensity=1.2,this.keyLightIntensity=2,this.keyLightX=-10,this.keyLightY=10,this.keyLightZ=10,this.fillLightIntensity=.8,this.fillLightX=10,this.fillLightY=5,this.fillLightZ=10,this.backLightIntensity=1,this.backLightX=0,this.backLightY=5,this.backLightZ=-10,this.sceneManager=null,this.sections=v,this.previousSectionIndex=-1,this.observer=null,this.isProgrammaticScroll=!1,this.scrollTimeout=null,this.resizeTimeout=null,this.calloutTimeout=null,this.cardTimeout=null,this.handleResize=()=>{this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(this.updateCalloutPath,W)},this.updateCalloutPath=()=>{if(!this.infoCard||!this.modelWrapper||!this.container)return;const e=this.currentSection,t=e?.callout,s=e?.multiCallouts,i=this.container.getBoundingClientRect(),n=this.modelWrapper.getBoundingClientRect(),r=i.left-n.left+i.width/2,a=i.top-n.top+i.height/2;if(t){const o=this.infoCard.getBoundingClientRect(),l=r+t.start.x,c=a+t.start.y,p=o.left-n.left-16,m=o.top-n.top+t.cardYOffset,y=p-t.horizontalLength,T=`M ${l} ${c} L ${y} ${m} L ${p} ${m}`;this.sectionCallouts={...this.sectionCallouts,[this.currentSectionIndex]:{path:T,start:{x:l,y:c},end:{x:p,y:m}}}}else this.sectionCallouts={...this.sectionCallouts,[this.currentSectionIndex]:null};if(s){const o=s.map(l=>{const c=r+l.start.x,p=a+l.start.y,m=r+l.end.x,y=a+l.end.y;let L=m;l.align==="left"?L=m+l.horizontalLength:L=m-l.horizontalLength;const D=`M ${c} ${p} L ${L} ${y} L ${m} ${y}`;return{...l,path:D,start:{x:c,y:p},end:{x:m,y}}});this.sectionMultiCallouts={...this.sectionMultiCallouts,[this.currentSectionIndex]:o}}else this.sectionMultiCallouts={...this.sectionMultiCallouts,[this.currentSectionIndex]:null}}}get currentSection(){return this.sections[this.currentSectionIndex]||this.sections[0]}firstUpdated(){this.container&&(this.sceneManager=new xt(this.container,this.modelPath),this.sceneManager.setSection(0),this.updateSceneLights()),this.setupObserver(),this.setupHeaderObserver(),window.addEventListener("resize",this.handleResize),setTimeout(()=>this.updateCalloutPath(),W)}async updated(e){(e.has("ambientIntensity")||e.has("keyLightIntensity")||e.has("keyLightX")||e.has("keyLightY")||e.has("keyLightZ")||e.has("fillLightIntensity")||e.has("fillLightX")||e.has("fillLightY")||e.has("fillLightZ")||e.has("backLightIntensity")||e.has("backLightX")||e.has("backLightY")||e.has("backLightZ"))&&this.updateSceneLights(),e.has("controlsVisible")&&this.controlsVisible&&(await this.updateComplete,setTimeout(()=>this.updateCalloutPath(),_)),(e.has("sectionCallouts")||e.has("currentSectionIndex")||e.has("isCardVisible")||e.has("isCalloutFading"))&&(await this.updateComplete,this.measureSingleCallout())}updateSceneLights(){this.sceneManager&&this.sceneManager.updateLights(this.ambientIntensity,this.keyLightIntensity,new f(this.keyLightX,this.keyLightY,this.keyLightZ),this.fillLightIntensity,new f(this.fillLightX,this.fillLightY,this.fillLightZ),this.backLightIntensity,new f(this.backLightX,this.backLightY,this.backLightZ))}setupObserver(){const e={root:null,rootMargin:"-50% 0px -50% 0px",threshold:0};this.observer=new IntersectionObserver(t=>{this.isProgrammaticScroll||t.forEach(s=>{if(s.isIntersecting){const i=Number(s.target.getAttribute("data-index"));if(!isNaN(i)){const n=this.sections[i]?.hidden,r=!this.controlsVisible;r&&!n?this.controlsVisible=!0:n&&(this.controlsVisible=!1),(r||this.currentSectionIndex!==i)&&this.changeSection(i),setTimeout(()=>this.updateCalloutPath(),_)}}})},e),this.sectionElements.forEach(t=>{this.observer?.observe(t)})}setupHeaderObserver(){this.style.setProperty("--header-height","0px");const e=new ResizeObserver(t=>{for(const s of t){const i=s.target.getBoundingClientRect().height;this.style.setProperty("--header-height",`${i}px`),this.updateCalloutPath()}});this.headerArea&&e.observe(this.headerArea)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",this.handleResize),this.sceneManager&&this.sceneManager.dispose(),this.observer&&this.observer.disconnect()}changeSection(e){if(this.currentSectionIndex===e&&!this.isCalloutFading)return;this.calloutTimeout&&clearTimeout(this.calloutTimeout),this.cardTimeout&&clearTimeout(this.cardTimeout),this.isCalloutFading=!0,this.isCardVisible=!1;const t=e===this.sections.length-1;t?(this.previousSectionIndex=this.currentSectionIndex,setTimeout(()=>{this.previousSectionIndex=-1},2e3)):this.previousSectionIndex=-1,this.currentSectionIndex=e,this.sceneManager&&this.sceneManager.setSection(e);const s=t?3e3:kt;this.calloutTimeout=window.setTimeout(()=>{this.updateCalloutPath(),requestAnimationFrame(()=>{this.isCalloutFading=!1,this.cardTimeout=window.setTimeout(()=>{this.isCardVisible=!0},Lt)})},s)}measureSingleCallout(){this.shadowRoot?.querySelectorAll(".single-callout-line")?.forEach(t=>{const s=t,i=s.getTotalLength();s.style.strokeDasharray=`${i}px`,s.style.strokeDashoffset=`${i}px`})}handleSectionClick(e){if(this.currentSectionIndex===e)return;this.isProgrammaticScroll=!0,this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.changeSection(e);const t=this.sectionElements[e];t&&t.scrollIntoView({behavior:"smooth"}),this.scrollTimeout=window.setTimeout(()=>{this.isProgrammaticScroll=!1},Mt)}render(){return g`
            <div class="wrapper">
                <div class="header-area">
                    ${this.renderHeader()}
                </div>
                
                <div class="interactive-area">
                    <div class="model-wrapper">
                        <div class="vh-microsite-interactive-model"></div>
                        ${this.renderControls()}
                        ${this.renderOverlays()}
                        ${this.renderInfoCard()}
                    </div>
                </div>

                ${this.renderScrollSections()}
            </div>
        `}renderHeader(){const e=(t,s)=>{const n=this.sections[t]?.header;if(!n)return null;const r=!!n.body,a=t===this.sections.length-1;return mt(n.title+(s?"-exit":""),g`
            <div class="header-overlay ${r?"has-body":""} ${a?"last-section":""} ${s?"exiting":""}">
                <h2 class="title">${Y(n.title)}</h2>
                
                ${n.features?g`
                    <div class="features">
                        ${n.features.map(o=>g`
                            <div class="feature-item">
                                <div class="check-icon">
                                    <img src="/images/vh-microsite-model-checkmark.svg" alt="Check" />
                                </div>
                                <span>${o}</span>
                            </div>
                        `)}
                    </div>
                `:""}

                ${n.body?g`
                    <p class="body-text">${Y(n.body)}</p>
                `:""}

                ${n.ctaLabel?g`
                    <a href="${n.ctaUrl||"#"}" class="cta-link">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M5 12H19" stroke="#76B729" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M12 5L19 12L12 19" stroke="#76B729" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        ${n.ctaLabel}
                    </a>
                `:null}
            </div>
        `)};return g`
            <div class="header-stack">
                ${this.previousSectionIndex!==-1?e(this.previousSectionIndex,!0):null}
                ${e(this.currentSectionIndex,!1)}
            </div>
        `}renderControls(){return g`
            <div class="controls-list ${this.controlsVisible?"visible":""}">
                ${this.sections.map((e,t)=>e.hidden?null:g`
                        <button 
                            class="control-item ${this.currentSectionIndex===t?"active":""}"
                            @click=${()=>this.handleSectionClick(t)}
                        >
                            <div class="icon">
                                <img src="/images/vh-microsite-model-checkmark.svg" alt="Checkmark" />
                            </div>
                            <span class="label">${e.label}</span>
                        </button>
                    `)}
            </div>
        `}renderOverlays(){return g`
            <div class="section-overlays">
                ${this.sections.map((e,t)=>{const s=t===this.currentSectionIndex,i=e.callout||e.multiCallouts,n=i&&s&&!this.isCalloutFading,r=this.sectionCallouts[t],a=this.sectionMultiCallouts[t];return i?g`
        <div class="section-overlay" data-section="${t}">
            <svg class="callout-overlay ${n?"visible":""}">
                ${r?A`
                    <path
                        class="single-callout-line"
                        d="${r.path}"
                        stroke="#002C4E"
                        stroke-width="2"
                        fill="none"
                    />
                    <circle
                        class="single-callout-dot start"
                        cx="${r.start.x}"
                        cy="${r.start.y}"
                        r="4"
                        fill="#002C4E"
                    />
                    <circle
                        class="single-callout-dot end"
                        cx="${r.end.x}"
                        cy="${r.end.y}"
                        r="4"
                        fill="#002C4E"
                    />
                `:null}
                
                ${a?a.map((o,l)=>A`
                    <g class="multi-callout-group" style="--i: ${l}">
                        <path
                            d="${o.path}"
                            stroke="#002C4E"
                            stroke-width="2"
                            fill="none"
                        />
                        <circle
                             cx="${o.start.x}"
                             cy="${o.start.y}"
                             r="4"
                             fill="#002C4E"
                        />
                        <circle
                             cx="${o.end.x}"
                             cy="${o.end.y}"
                             r="4"
                             fill="#002C4E"
                        />
                    </g>
                 `):null}
            </svg>
            
            <!-- Render Multi-Callout Labels -->
            ${a&&n?g`
                <div class="multi-callout-labels">
                    ${a.map((o,l)=>g`
                        <div class="callout-label ${o.align}" style="
                            position: absolute; 
                            left: ${o.end.x}px; 
                            top: ${o.end.y}px; 
                            transform: translate(${o.align==="left"?"-100%":"0"}, -50%);
                            --i: ${l};
                        ">
                            <span class="number">${o.label}</span>
                            ${o.subLabel?g`<span class="text">${o.subLabel}</span>`:""}
                        </div>
                    `)}
                </div>
            `:null}
        </div>
    `:null})}
            </div>
        `}renderInfoCard(){return g`
            <div class="info-card ${this.controlsVisible&&this.isCardVisible?"visible":""}">
                <div class="card-header">
                    <img src="/images/vh-microsite-model-checkmark.svg" alt="Checkmark" />
                    <h3>${this.currentSection.label}</h3>
                </div>
                <p>${this.currentSection.description}</p>
            </div>
        `}renderScrollSections(){return g`
            ${this.sections.map((e,t)=>g`
                <div class="section" data-index="${t}">
                    
                </div>
            `)}
        `}};h.styles=j`
    ${U(ut)}
  `;d([u({type:String})],h.prototype,"modelPath",2);d([I(".vh-microsite-interactive-model")],h.prototype,"container",2);d([I(".header-area")],h.prototype,"headerArea",2);d([I(".info-card")],h.prototype,"infoCard",2);d([I(".model-wrapper")],h.prototype,"modelWrapper",2);d([gt(".section")],h.prototype,"sectionElements",2);d([x()],h.prototype,"currentSectionIndex",2);d([x()],h.prototype,"controlsVisible",2);d([x()],h.prototype,"sectionCallouts",2);d([x()],h.prototype,"sectionMultiCallouts",2);d([x()],h.prototype,"isCalloutFading",2);d([x()],h.prototype,"isCardVisible",2);d([u({type:Number})],h.prototype,"ambientIntensity",2);d([u({type:Number})],h.prototype,"keyLightIntensity",2);d([u({type:Number})],h.prototype,"keyLightX",2);d([u({type:Number})],h.prototype,"keyLightY",2);d([u({type:Number})],h.prototype,"keyLightZ",2);d([u({type:Number})],h.prototype,"fillLightIntensity",2);d([u({type:Number})],h.prototype,"fillLightX",2);d([u({type:Number})],h.prototype,"fillLightY",2);d([u({type:Number})],h.prototype,"fillLightZ",2);d([u({type:Number})],h.prototype,"backLightIntensity",2);d([u({type:Number})],h.prototype,"backLightX",2);d([u({type:Number})],h.prototype,"backLightY",2);d([u({type:Number})],h.prototype,"backLightZ",2);d([x()],h.prototype,"previousSectionIndex",2);h=d([Q("vh-microsite-interactive-model")],h);const $t={title:"Components/Interactive Model",component:"vh-microsite-interactive-model",tags:["autodocs"],argTypes:{modelPath:{control:"text"},ambientIntensity:{control:{type:"range",min:0,max:5,step:.1}},keyLightIntensity:{control:{type:"range",min:0,max:10,step:.1}},keyLightX:{control:{type:"range",min:-50,max:50,step:1}},keyLightY:{control:{type:"range",min:-50,max:50,step:1}},keyLightZ:{control:{type:"range",min:-50,max:50,step:1}},fillLightIntensity:{control:{type:"range",min:0,max:10,step:.1}},fillLightX:{control:{type:"range",min:-50,max:50,step:1}},fillLightY:{control:{type:"range",min:-50,max:50,step:1}},fillLightZ:{control:{type:"range",min:-50,max:50,step:1}},backLightIntensity:{control:{type:"range",min:0,max:10,step:.1}},backLightX:{control:{type:"range",min:-50,max:50,step:1}},backLightY:{control:{type:"range",min:-50,max:50,step:1}},backLightZ:{control:{type:"range",min:-50,max:50,step:1}}}},M={args:{modelPath:"/3d-models/vibranthealth_bottle_v3/VibrantHealth_Anim_JustBottle_Fix.glb",ambientIntensity:1.2,keyLightIntensity:2,keyLightX:-10,keyLightY:10,keyLightZ:10,fillLightIntensity:.6,fillLightX:10,fillLightY:5,fillLightZ:10,backLightIntensity:1,backLightX:0,backLightY:5,backLightZ:-10},render:e=>g`<div style="width: 100%; height: 600px;">
      <vh-microsite-interactive-model
        .modelPath=${e.modelPath}
        .ambientIntensity=${e.ambientIntensity}
        .keyLightIntensity=${e.keyLightIntensity}
        .keyLightX=${e.keyLightX}
        .keyLightY=${e.keyLightY}
        .keyLightZ=${e.keyLightZ}
        .fillLightIntensity=${e.fillLightIntensity}
        .fillLightX=${e.fillLightX}
        .fillLightY=${e.fillLightY}
        .fillLightZ=${e.fillLightZ}
        .backLightIntensity=${e.backLightIntensity}
        .backLightX=${e.backLightX}
        .backLightY=${e.backLightY}
        .backLightZ=${e.backLightZ}
      ></vh-microsite-interactive-model>
    </div>`};M.parameters={...M.parameters,docs:{...M.parameters?.docs,source:{originalSource:`{
  args: {
    modelPath: "/3d-models/vibranthealth_bottle_v3/VibrantHealth_Anim_JustBottle_Fix.glb",
    ambientIntensity: 1.2,
    keyLightIntensity: 2.0,
    keyLightX: -10,
    keyLightY: 10,
    keyLightZ: 10,
    fillLightIntensity: 0.6,
    fillLightX: 10,
    fillLightY: 5,
    fillLightZ: 10,
    backLightIntensity: 1.0,
    backLightX: 0,
    backLightY: 5,
    backLightZ: -10
  },
  render: (args: any) => html\`<div style="width: 100%; height: 600px;">
      <vh-microsite-interactive-model
        .modelPath=\${args.modelPath}
        .ambientIntensity=\${args.ambientIntensity}
        .keyLightIntensity=\${args.keyLightIntensity}
        .keyLightX=\${args.keyLightX}
        .keyLightY=\${args.keyLightY}
        .keyLightZ=\${args.keyLightZ}
        .fillLightIntensity=\${args.fillLightIntensity}
        .fillLightX=\${args.fillLightX}
        .fillLightY=\${args.fillLightY}
        .fillLightZ=\${args.fillLightZ}
        .backLightIntensity=\${args.backLightIntensity}
        .backLightX=\${args.backLightX}
        .backLightY=\${args.backLightY}
        .backLightZ=\${args.backLightZ}
      ></vh-microsite-interactive-model>
    </div>\`
}`,...M.parameters?.docs?.source}}};const Rt=["Default"];export{M as Default,Rt as __namedExportsOrder,$t as default};
