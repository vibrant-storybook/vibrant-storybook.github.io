import{e as H,i as Y,A as W,p as _,r as V,a as D,n as B,c as v,d as U,b as d,w as N,o as C,t as j}from"./iframe-DDQ7Ib4K.js";import{e as G,C as Z,M as R,S as Q,P as X,W as q,a as I,E as J,b as K,O as ee,A as te,D as A,G as T,T as ie,L as y,c as oe,d as se,f as k,g as P,h as M,i as ne,j as ae,k as re,l as z,B as le,V as x,m as f,Q as L,n as $,o as b}from"./OutputPass-D8QaCyfu.js";import"./preload-helper-PPVm8Dsz.js";let he;function ce(a){return(e,o)=>G(e,o,{get(){return(this.renderRoot??(he??=document.createDocumentFragment())).querySelectorAll(a)}})}const de=H(class extends Y{constructor(){super(...arguments),this.key=W}render(a,e){return this.key=a,e}update(a,[e,o]){return e!==this.key&&(_(a),this.key=e),o}}),pe='@keyframes slideInRight{0%{opacity:0;transform:translate(30px)}to{opacity:1;transform:translate(0)}}:host{display:block;width:100%;position:relative;font-family:Poppins,sans-serif}.wrapper{position:relative;width:100%;max-width:1440px;margin:0 auto}.model-wrapper{position:relative;width:100%;height:100%;z-index:10}.vh-microsite-interactive-model{width:600px;height:600px;max-width:100%;max-height:100%;position:absolute;top:0;left:50%;transform:translate(-50%);overflow:hidden}.vh-microsite-interactive-model canvas{display:block;width:100%!important;height:100%!important}.section{width:100%;min-height:100vh;scroll-snap-align:start;position:relative;z-index:1;pointer-events:none}.content-overlay{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:20}.controls-list{position:absolute;top:300px;left:40px;transform:translateY(-50%);display:flex;flex-direction:column;gap:24px;z-index:10;opacity:0;pointer-events:none;transition:opacity .6s ease}.controls-list.visible{opacity:1;pointer-events:auto}.control-item{background:transparent;border:none;padding:1px 30px 1px 1px;border-radius:50px;display:flex;align-items:center;gap:12px;cursor:pointer;transition:all .3s ease;text-align:left;outline:none;width:fit-content}.control-item .icon{width:24px;height:24px;display:flex;align-items:center;justify-content:center;opacity:1;transition:filter .3s ease}.control-item .icon img{width:100%;height:100%;display:block}.control-item .label{font-family:var(--vh-font-poppins);font-size:16px;font-style:normal;font-weight:400;line-height:1.5;color:#002c4e;opacity:.7;transition:color .3s ease,opacity .3s ease}.control-item:hover .label{opacity:1}.control-item.active{background-color:#76b729}.control-item.active .icon{filter:brightness(0) invert(1)}.control-item.active .label{color:#fff;opacity:1;font-weight:600}.controls{position:absolute;top:300px;left:20px;transform:translateY(-50%);display:flex;flex-direction:column;gap:12px;z-index:10;pointer-events:none}.controls button{pointer-events:auto;padding:12px 24px;background:#ffffffe6;border:1px solid rgba(0,0,0,.1);border-radius:8px;font-family:Poppins,sans-serif;font-size:14px;color:#333;cursor:pointer;transition:all .2s ease;box-shadow:0 4px 6px #0000000d;font-weight:500;text-align:center;width:160px}.controls button:hover{background:#fff;transform:translate(4px);box-shadow:0 6px 12px #0000001a}.controls button:active{transform:translate(2px);box-shadow:0 2px 4px #0000000d}.info-card{position:absolute;top:240px;right:40px;transform:translateY(-50%);width:261px;background-color:#f0fdf4;border-radius:12px;padding:24px;box-shadow:0 4px 20px #0000000d;z-index:10;font-family:Poppins,sans-serif;opacity:0;pointer-events:none;transition:none}.info-card.visible{opacity:1;pointer-events:auto;transition:opacity .6s ease}.info-card .card-header{display:flex;align-items:center;gap:10px;margin-bottom:12px}.info-card .card-header img{width:20px;height:20px;display:block}.info-card .card-header h3{margin:0;font-family:var(--vh-font-poppins);font-size:18px;font-style:normal;font-weight:400;line-height:1.2;font-weight:700;color:#002c4e}.info-card p{margin:0;font-family:var(--vh-font-poppins);font-size:14px;font-style:normal;font-weight:300;line-height:1.3;color:#334155}.section-overlays{position:absolute;inset:0;pointer-events:none;z-index:15}.section-overlay{position:absolute;inset:0;width:100%;height:100%}.callout-overlay{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:15;opacity:0}.callout-overlay.visible{opacity:1;transition:opacity .4s ease}.callout-overlay path{transition:d .1s linear}.header-overlay{grid-area:stack;position:relative;margin:0 auto;top:auto;bottom:auto;width:100%;max-width:900px;z-index:20;text-align:center;display:flex;flex-direction:column;align-items:center;gap:16px;pointer-events:none;transition:none}.header-overlay.has-body{top:auto;margin-top:-40px}.header-overlay .title{margin:0;color:var(--VH-Navy, #002C4E);text-align:center;font-family:Feature Display Condensed,sans-serif;font-size:var(--font-size-6XL, 62px);font-style:normal;font-weight:400;line-height:100%;opacity:0;animation:slideInRight .8s ease-out forwards;animation-delay:0ms}.header-overlay .title em{font-family:Feature Display Condensed,sans-serif;font-size:var(--font-size-6XL, 62px);font-style:italic;font-weight:700;line-height:100%;color:var(--VH-Navy, #002C4E)}.header-overlay .features{display:flex;align-items:center;justify-content:center;gap:24px;margin-top:8px}.header-overlay .features .feature-item{display:flex;align-items:center;gap:8px}.header-overlay .features .feature-item .check-icon{display:flex;align-items:center;justify-content:center}.header-overlay .features .feature-item span{font-family:var(--vh-font-poppins);font-size:16px;font-style:normal;font-weight:400;line-height:1.5;color:#002c4e}.header-overlay .features .feature-item{opacity:0;animation:slideInRight .8s ease-out forwards;animation-delay:.3s}.header-overlay .body-text{margin:0;font-family:var(--vh-font-poppins);font-style:normal;font-weight:400;line-height:1.5;font-size:16px;color:var(--VH-Navy, #002C4E);max-width:900px;text-align:center;opacity:0;animation:slideInRight .8s ease-out forwards;animation-delay:.6s}.header-overlay .cta-link{pointer-events:auto;display:flex;align-items:center;gap:8px;text-decoration:none;color:#002c4e;font-family:var(--vh-font-poppins);font-size:18px;font-style:normal;font-weight:400;line-height:1.2;font-weight:600;transition:opacity .2s ease;opacity:0;animation:slideInRight .8s ease-out forwards;animation-delay:.9s}.header-overlay .cta-link:hover{opacity:.8}.header-overlay.last-section .title{animation-delay:1.5s}.header-overlay.last-section .features .feature-item{animation-delay:1.8s}.header-overlay.last-section .body-text{animation-delay:2.1s}.header-overlay.last-section .cta-link{animation-delay:2.4s}.header-overlay.exiting{pointer-events:none;animation:fadeOut .8s ease-out forwards;animation-delay:.8s;z-index:10}.header-overlay.exiting .title,.header-overlay.exiting .features .feature-item,.header-overlay.exiting .body-text,.header-overlay.exiting .cta-link{animation:none;opacity:1;transform:none}.header-stack{display:grid;grid-template-areas:"stack";width:100%;min-height:186px;align-items:end}@keyframes fadeOut{0%{opacity:1}to{opacity:0}}.header-area{position:sticky;top:0;z-index:20;pointer-events:none;width:100%;padding-top:60px}.interactive-area{position:sticky;top:calc(var(--header-height, 0px) + 60px);height:calc(100vh - var(--header-height, 0px) - 60px);width:100%;z-index:10}',g=[{label:"Intro",view:"front",textAngle:0,modelRotationY:0,description:"",hidden:!0,isIdle:!0,header:{title:"<em>Truth</em> Powers <em>Better Health</em>",features:["Full Disclosure, Always.","No Proprietary Blends, Ever."],body:"Clean, science-backed supplements—so you can stop stressing and start living."}},{label:"Full Disclosure Labelling",view:"back",textAngle:0,modelRotationY:180,description:"Explore your favorite products—from ingredient functions and sources to version numbers and scientific support. Every label has a story, and we're not keeping it to ourselves, even if that means sharing our formulas with the world.",callout:{start:{x:35,y:-110},horizontalLength:230,cardYOffset:90},header:{title:"<em>What’s</em> Inside <em>& Why</em>"}},{label:"No Proprietary Blends",view:"front",textAngle:275,modelRotationY:220,description:"At Vibrant Health, we never use proprietary blends because we believe you deserve to know exactly what’s in your supplements. Full transparency empowers you to make confident, informed choices about your health.",callout:{start:{x:9,y:79},horizontalLength:200,cardYOffset:80},header:{title:"<em>What’s</em> Inside <em>& Why</em>"}},{label:"Non GMO Certified",view:"left",textAngle:200,modelRotationY:0,description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam nec metus nec ante placerat finibus.",callout:{start:{x:6,y:-35},horizontalLength:200,cardYOffset:30},header:{title:"<em>What’s</em> Inside <em>& Why</em>"}},{label:"Clinically Formulated",view:"left",textAngle:127,modelRotationY:350,description:"Our products are clinically formulated using science-backed ingredients and research. Green Vibrance has been continuously improved more than 20 times since 1992. Every refinement is driven by evolving research to deliver real, measurable results you can trust.",callout:{start:{x:32,y:105},horizontalLength:200,cardYOffset:80},header:{title:"<em>What’s</em> Inside <em>& Why</em>"}},{label:"Made in USA",view:"right",textAngle:62,modelRotationY:0,highlightWidth:.5,description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam nec metus nec ante placerat finibus.",callout:{start:{x:7,y:-90},horizontalLength:250,cardYOffset:80},header:{title:"<em>What’s</em> Inside <em>& Why</em>"}},{label:"Top View",view:"top",textAngle:0,description:"",hidden:!0,header:{title:"<em>Dynamic</em> by Design",body:"Science doesn’t stand still, and neither should your health. Every 18–24 months, we collaborate with scientists and suppliers to review the latest research and upgrade our products, something we call formula obsolescence. That’s why you’ll always see version numbers on our packaging—it’s our promise to keep evolving.",ctaLabel:"Track Our Formula Updates",ctaUrl:"#"}}],me=`
    varying vec2 vUv;
    void main() {
        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
`,ue=`
    uniform sampler2D map;
    uniform float uHighlightAngle; // Angle to highlight (radians), relative to texture center
    uniform vec3 uHighlightColor;
    uniform float uShowHighlight; // 0.0 = no highlight, 1.0 = highlight
    uniform vec3 uBaseColor; // Base color tint for the texture
    uniform float uHighlightWidth; // Width of highlight in radians
    varying vec2 vUv;

    // Constants
    const float PI = 3.14159265;
    const float TWO_PI = 6.28318530;

    void main() {
        vec4 texColor = texture2D(map, vUv);
        
        // Only affect non-transparent pixels
        if (texColor.a < 0.1) discard; 

        // Calculate angle of current pixel
        vec2 centered = vUv - 0.5;
        float angle = atan(centered.y, centered.x); // -PI to PI
        
        // Calculate distance to highlight angle
        float dist = abs(angle - uHighlightAngle);
        if (dist > PI) dist = TWO_PI - dist; // Wrap around

        vec3 finalColor = texColor.rgb * uBaseColor; // Apply base color tint
        
        // If within width, use highlight color
        if (uShowHighlight > 0.5 && dist < uHighlightWidth) {
            finalColor = uHighlightColor;
        }

        gl_FragColor = vec4(finalColor, texColor.a);
    }
`;class ge{constructor(e,o){this.rawModel=null,this.textRingMesh=null,this.clock=new Z,this.mixer=null,this.animationAction=null,this.capMesh=null,this.capMaxY=0,this.capStartY=0,this.pendingRotationIndex=-1,this.pendingRingTriggered=!1,this.pendingModelTriggered=!1,this.targetTextRotation=39*Math.PI/180,this.textRotationOffset=39*Math.PI/180,this.isAutoRotating=!0,this.targetQuaternion=null,this.targetZoom=1,this.baseScale=1,this.currentModelZoom=1,this.animationId=null,this.animationTimeout=null,this.currentSectionIndex=-1,this.isLongSpin=!1,this.handleResize=()=>{if(!this.container||!this.camera||!this.renderer)return;const i=this.container.clientWidth,t=this.container.clientHeight;this.camera.aspect=i/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(i,t),this.composer.setSize(i,t)},this.animate=()=>{this.animationId=requestAnimationFrame(this.animate);const i=this.clock.getDelta();if(this.mixer&&(this.mixer.update(i),this.capMesh&&this.capMesh.material instanceof R)){const n=this.capMesh.position.y,s=this.capStartY,h=this.capMaxY>s?this.capMaxY:s+1,r=s+(h-s)*.05,l=s+(h-s)*.5,c=$.clamp((n-r)/(l-r),0,1);if(this.capMesh.material.opacity=1-c,this.pendingRotationIndex!==-1){const u=r+(l-r)*.1;!this.pendingRingTriggered&&n>=u&&(this.updateRingTarget(this.pendingRotationIndex),this.pendingRingTriggered=!0);const S=l;!this.pendingModelTriggered&&n>=S&&(this.updateModelTarget(this.pendingRotationIndex),this.pendingModelTriggered=!0),this.pendingRingTriggered&&this.pendingModelTriggered&&(this.pendingRotationIndex=-1)}}if(this.modelContainer){if(this.isAutoRotating)this.modelContainer.rotation.y+=.3*i;else if(this.targetQuaternion){const n=1-Math.exp(-5*i);this.modelContainer.quaternion.slerp(this.targetQuaternion,n)}}const t=this.targetZoom-this.currentModelZoom;if(Math.abs(t)>.001){const n=1-Math.exp(-3*i);if(this.currentModelZoom+=t*n,this.modelContainer&&this.baseScale>0){const s=this.baseScale*this.currentModelZoom;this.modelContainer.scale.set(s,s,s)}}if(this.textRingMesh)if(this.isAutoRotating)this.textRingMesh.rotation.z-=.12*i;else{let n=this.textRingMesh.rotation.z,s=this.targetTextRotation-n;if(!this.isLongSpin){for(;s>Math.PI;)s-=Math.PI*2;for(;s<-Math.PI;)s+=Math.PI*2}const h=this.isLongSpin?2:5,r=1-Math.exp(-h*i);this.textRingMesh.rotation.z+=s*r}this.composer.render()},this.container=e,this.init(o)}init(e){const o=this.container.clientWidth*2,i=this.container.clientHeight*2;this.scene=new Q;const t=o/i,n=45;this.camera=new X(n,t,.1,100),this.camera.position.set(0,0,11),this.camera.lookAt(0,0,0),this.renderer=new q({antialias:!0,alpha:!0}),this.renderer.setSize(o,i),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.outputColorSpace=I,this.container.appendChild(this.renderer.domElement),this.composer=new J(this.renderer);const s=new K(this.scene,this.camera,0,0);s.sampleLevel=2,this.composer.addPass(s);const h=new ee;this.composer.addPass(h),this.composer.setSize(o,i),this.composer.setPixelRatio(window.devicePixelRatio);const r=new te(16777215,1);this.scene.add(r);const l=new A(16777215,1.5);l.position.set(10,20,10),this.scene.add(l);const c=new A(16777215,1);c.position.set(-10,10,-10),this.scene.add(c),this.modelContainer=new T,this.scene.add(this.modelContainer),this.loadRings(),this.loadModel(e),this.animate(),window.addEventListener("resize",this.handleResize)}loadRings(){const e=new ie,o=new T;[{path:"/images/vh-microsite-model-outer-ring.svg",size:10.6,isText:!1},{path:"/images/vh-microsite-model-text.svg",size:10,isText:!0},{path:"/images/vh-microsite-model-inner-ring.svg",size:9.4,isText:!1}].forEach(t=>{e.load(t.path,n=>{n.colorSpace=I,n&&(n.anisotropy=this.renderer.capabilities.getMaxAnisotropy(),n.minFilter=y,n.magFilter=y);const s=new oe(t.size,t.size);let h;if(t.isText){h=new se({uniforms:{map:{value:n},uHighlightAngle:{value:0},uHighlightColor:{value:new P(11342)},uShowHighlight:{value:0},uBaseColor:{value:new P(11184810)},uHighlightWidth:{value:.8}},vertexShader:me,fragmentShader:ue,transparent:!0,side:k,depthWrite:!1});const r=new M(s,h);this.textRingMesh=r,this.textRingMesh.rotation.z=this.targetTextRotation,this.updateHighlightUniform(-1),o.add(r)}else{h=new ne({map:n,transparent:!0,side:k,depthWrite:!1,color:11184810});const r=new M(s,h);o.add(r)}})}),o.position.y=0,o.position.z=-2,this.scene.add(o)}loadModel(e){new ae().load(e,i=>{if(this.rawModel=i.scene,i.animations&&i.animations.length>0){this.mixer=new re(this.rawModel);const r=i.animations[0];this.animationAction=this.mixer.clipAction(r),this.animationAction.setLoop(z,1),this.animationAction.clampWhenFinished=!0,this.animationAction.timeScale=4,r.tracks.forEach(l=>{if(l.name.toLowerCase().includes(".position"))for(let c=1;c<l.values.length;c+=3)l.values[c]>this.capMaxY&&(this.capMaxY=l.values[c])})}const t=new le().setFromObject(this.rawModel),n=t.getSize(new x),s=t.getCenter(new x);this.rawModel.position.sub(s),this.modelContainer.add(this.rawModel);const h=Math.max(n.x,n.y,n.z);if(h>0){const r=6/h;this.baseScale=r,this.modelContainer.scale.set(r,r,r)}this.rawModel.traverse(r=>{if(r instanceof M){r.name.toLowerCase().includes("cap")&&(this.capMesh=r,this.capMesh.material instanceof R&&(this.capMesh.material.transparent=!0,this.capMesh.material.opacity=1,this.capStartY=this.capMesh.position.y));const l=r.material;if(l){const c=u=>{u&&(u.anisotropy=this.renderer.capabilities.getMaxAnisotropy(),u.minFilter=y,u.magFilter=y,u.needsUpdate=!0)};c(l.map),c(l.emissiveMap),c(l.roughnessMap),c(l.metalnessMap),c(l.normalMap),l.normalMap&&(l.normalMap.flipY=!1),c(l.alphaMap),c(l.aoMap),c(l.clearcoatMap),c(l.clearcoatRoughnessMap),c(l.transmissionMap)}}})},void 0,i=>{console.error("An error happened loading the GLB",i)})}setSection(e){if(this.isAutoRotating=!1,!this.modelContainer)return;const o=e===g.length-1,i=this.currentSectionIndex===g.length-1;if(o){if(this.animationAction){this.animationAction.reset(),this.animationAction.timeScale=8,this.animationAction.play(),this.pendingRotationIndex=e,this.pendingRingTriggered=!1,this.pendingModelTriggered=!1,this.animationTimeout&&(clearTimeout(this.animationTimeout),this.animationTimeout=null),this.updateHighlightUniform(-1);return}}else i?(this.animationAction&&(this.animationAction.paused=!1,this.animationAction.timeScale=-6,this.animationAction.setLoop(z,1),this.animationAction.clampWhenFinished=!0,this.animationAction.play()),this.pendingRotationIndex=-1):(this.animationAction&&this.animationAction.isRunning()&&this.animationAction.stop(),this.pendingRotationIndex=-1);this.currentSectionIndex=e,this.rotateToSection(e)}rotateToSection(e){this.updateModelTarget(e),this.updateRingTarget(e)}updateModelTarget(e){if(!this.modelContainer)return;const o=g[e];if(o.isIdle){this.isAutoRotating=!0,this.updateHighlightUniform(-1);return}const i=o.view,n=new f().setFromQuaternion(this.modelContainer.quaternion,"YXZ").y,s=new L().setFromAxisAngle(new x(0,1,0),n),h=new L;if(o.modelRotationY!==void 0){const r=$.degToRad(o.modelRotationY);h.setFromEuler(new f(0,r,0))}else switch(i){case"front":h.setFromEuler(new f(0,0,0));break;case"back":h.setFromEuler(new f(0,Math.PI,0));break;case"left":h.setFromEuler(new f(0,-Math.PI/2,0));break;case"right":h.setFromEuler(new f(0,Math.PI/2,0));break;case"top":h.setFromAxisAngle(new x(1,0,0),Math.PI/2).multiply(s);break;case"bottom":h.setFromAxisAngle(new x(1,0,0),-Math.PI/2).multiply(s);break}this.targetQuaternion=h,i==="top"||i==="bottom"||e===g.length-1?(this.updateHighlightUniform(-1),this.targetZoom=1.3):(this.updateHighlightUniform(e),this.targetZoom=1)}updateRingTarget(e){if(!this.textRingMesh)return;const o=g[e];if(o.view==="top")this.targetTextRotation=this.textRingMesh.rotation.z-Math.PI,this.isLongSpin=!0;else{const i=o.textAngle*Math.PI/180;this.targetTextRotation=-i+this.textRotationOffset,this.isLongSpin=!1}}updateHighlightUniform(e){if(!this.textRingMesh)return;const o=this.textRingMesh.material;if(!o.uniforms)return;if(e<0){o.uniforms.uShowHighlight.value=0;return}o.uniforms.uShowHighlight.value=1;const i=g[e];o.uniforms.uHighlightWidth.value=i.highlightWidth??.8;const t=i.textAngle*Math.PI/180,n=this.textRotationOffset;let s=Math.PI/2+t-n;for(;s>Math.PI;)s-=Math.PI*2;for(;s<-Math.PI;)s+=Math.PI*2;o.uniforms.uHighlightAngle.value=s}dispose(){this.animationId&&cancelAnimationFrame(this.animationId),window.removeEventListener("resize",this.handleResize),this.renderer.dispose()}}var fe=Object.defineProperty,ve=Object.getOwnPropertyDescriptor,m=(a,e,o,i)=>{for(var t=i>1?void 0:i?ve(e,o):e,n=a.length-1,s;n>=0;n--)(s=a[n])&&(t=(i?s(e,o,t):s(t))||t);return i&&t&&fe(e,o,t),t};const O=50,E=100,xe=400,ye=1100,we=1e3;let p=class extends U{constructor(){super(...arguments),this.modelPath="/3d-models/vibranthealth_bottle_v3/VibrantHealth_Anim_JustBottle_Fix.glb",this.currentSectionIndex=0,this.controlsVisible=!1,this.sectionCallouts={},this.isCalloutFading=!1,this.isCardVisible=!1,this.sceneManager=null,this.sections=g,this.previousSectionIndex=-1,this.observer=null,this.isProgrammaticScroll=!1,this.scrollTimeout=null,this.resizeTimeout=null,this.handleResize=()=>{this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(this.updateCalloutPath,E)},this.updateCalloutPath=()=>{if(!this.infoCard||!this.modelWrapper||!this.container)return;const e=this.currentSection?.callout;if(!e){this.sectionCallouts={...this.sectionCallouts,[this.currentSectionIndex]:null};return}const o=this.infoCard.getBoundingClientRect(),i=this.modelWrapper.getBoundingClientRect(),t=this.container.getBoundingClientRect(),n=t.left-i.left+t.width/2,s=t.top-i.top+t.height/2,h=n+e.start.x,r=s+e.start.y,l=o.left-i.left-16,c=o.top-i.top+e.cardYOffset,u=l-e.horizontalLength,F=`M ${h} ${r} L ${u} ${c} L ${l} ${c}`;this.sectionCallouts={...this.sectionCallouts,[this.currentSectionIndex]:{path:F,start:{x:h,y:r},end:{x:l,y:c}}}}}get currentSection(){return this.sections[this.currentSectionIndex]||this.sections[0]}firstUpdated(){this.container&&(this.sceneManager=new ge(this.container,this.modelPath),this.sceneManager.setSection(0)),this.setupObserver(),this.setupHeaderObserver(),window.addEventListener("resize",this.handleResize),setTimeout(()=>this.updateCalloutPath(),E)}setupObserver(){const a={root:null,rootMargin:"-50% 0px -50% 0px",threshold:0};this.observer=new IntersectionObserver(e=>{this.isProgrammaticScroll||e.forEach(o=>{if(o.isIntersecting){const i=Number(o.target.getAttribute("data-index"));if(!isNaN(i)){const t=this.sections[i]?.hidden,n=!this.controlsVisible;n&&!t?this.controlsVisible=!0:t&&(this.controlsVisible=!1),(n||this.currentSectionIndex!==i)&&this.changeSection(i),setTimeout(()=>this.updateCalloutPath(),O)}}})},a),this.sectionElements.forEach(e=>{this.observer?.observe(e)})}setupHeaderObserver(){this.style.setProperty("--header-height","0px");const a=new ResizeObserver(e=>{for(const o of e){const i=o.target.getBoundingClientRect().height;this.style.setProperty("--header-height",`${i}px`),this.updateCalloutPath()}});this.headerArea&&a.observe(this.headerArea)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",this.handleResize),this.sceneManager&&this.sceneManager.dispose(),this.observer&&this.observer.disconnect()}changeSection(a){if(this.currentSectionIndex===a&&!this.isCalloutFading)return;this.isCalloutFading=!0,this.isCardVisible=!1,a===this.sections.length-1?(this.previousSectionIndex=this.currentSectionIndex,setTimeout(()=>{this.previousSectionIndex=-1},2e3)):this.previousSectionIndex=-1,this.currentSectionIndex=a,this.sceneManager&&this.sceneManager.setSection(a),setTimeout(()=>{this.updateCalloutPath(),requestAnimationFrame(()=>{this.isCalloutFading=!1,setTimeout(()=>{this.isCardVisible=!0},xe)})},ye)}async updated(a){a.has("controlsVisible")&&this.controlsVisible&&(await this.updateComplete,setTimeout(()=>this.updateCalloutPath(),O))}handleSectionClick(a){if(this.currentSectionIndex===a)return;this.isProgrammaticScroll=!0,this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.changeSection(a);const e=this.sectionElements[a];e&&e.scrollIntoView({behavior:"smooth"}),this.scrollTimeout=window.setTimeout(()=>{this.isProgrammaticScroll=!1},we)}render(){return d`
            <div class="wrapper">
                <div class="header-area">
                    ${this.renderHeader()}
                </div>
                
                <div class="interactive-area">
                    <div class="model-wrapper">
                        <div class="vh-microsite-interactive-model"></div>
                        ${this.renderControls()}
                        ${this.renderOverlays()}
                        ${this.renderInfoCard()}
                    </div>
                </div>

                ${this.renderScrollSections()}
            </div>
        `}renderHeader(){const a=(e,o)=>{const t=this.sections[e]?.header;if(!t)return null;const n=!!t.body,s=e===this.sections.length-1;return de(t.title+(o?"-exit":""),d`
            <div class="header-overlay ${n?"has-body":""} ${s?"last-section":""} ${o?"exiting":""}">
                <h2 class="title">${C(t.title)}</h2>
                
                ${t.features?d`
                    <div class="features">
                        ${t.features.map(h=>d`
                            <div class="feature-item">
                                <div class="check-icon">
                                    <img src="/images/vh-microsite-model-checkmark.svg" alt="Check" />
                                </div>
                                <span>${h}</span>
                            </div>
                        `)}
                    </div>
                `:""}

                ${t.body?d`
                    <p class="body-text">${C(t.body)}</p>
                `:""}

                ${t.ctaLabel?d`
                    <a href="${t.ctaUrl||"#"}" class="cta-link">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M5 12H19" stroke="#76B729" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M12 5L19 12L12 19" stroke="#76B729" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        ${t.ctaLabel}
                    </a>
                `:null}
            </div>
        `)};return d`
            <div class="header-stack">
                ${this.previousSectionIndex!==-1?a(this.previousSectionIndex,!0):null}
                ${a(this.currentSectionIndex,!1)}
            </div>
        `}renderControls(){return d`
            <div class="controls-list ${this.controlsVisible?"visible":""}">
                ${this.sections.map((a,e)=>a.hidden?null:d`
                        <button 
                            class="control-item ${this.currentSectionIndex===e?"active":""}"
                            @click=${()=>this.handleSectionClick(e)}
                        >
                            <div class="icon">
                                <img src="/images/vh-microsite-model-checkmark.svg" alt="Checkmark" />
                            </div>
                            <span class="label">${a.label}</span>
                        </button>
                    `)}
            </div>
        `}renderOverlays(){return d`
            <div class="section-overlays">
                ${this.sections.map((a,e)=>{const o=e===this.currentSectionIndex,i=a.callout&&this.controlsVisible&&o&&!this.isCalloutFading,t=this.sectionCallouts[e];return a.callout?d`
                        <div class="section-overlay" data-section="${e}">
                            <svg class="callout-overlay ${i?"visible":""}">
                                ${t?N`
                                    <path
                                        d="${t.path}"
                                        stroke="#002C4E"
                                        stroke-width="2"
                                        fill="none"
                                    />
                                    <circle
                                        cx="${t.start.x}"
                                        cy="${t.start.y}"
                                        r="4"
                                        fill="#002C4E"
                                    />
                                    <circle
                                        cx="${t.end.x}"
                                        cy="${t.end.y}"
                                        r="4"
                                        fill="#002C4E"
                                    />
                                `:null}
                            </svg>
                        </div>
                    `:null})}
            </div>
        `}renderInfoCard(){return d`
            <div class="info-card ${this.controlsVisible&&this.isCardVisible?"visible":""}">
                <div class="card-header">
                    <img src="/images/vh-microsite-model-checkmark.svg" alt="Checkmark" />
                    <h3>${this.currentSection.label}</h3>
                </div>
                <p>${this.currentSection.description}</p>
            </div>
        `}renderScrollSections(){return d`
            ${this.sections.map((a,e)=>d`
                <div class="section" data-index="${e}">
                    
                </div>
            `)}
        `}};p.styles=D`
    ${V(pe)}
  `;m([B({type:String})],p.prototype,"modelPath",2);m([b(".vh-microsite-interactive-model")],p.prototype,"container",2);m([b(".header-area")],p.prototype,"headerArea",2);m([b(".info-card")],p.prototype,"infoCard",2);m([b(".model-wrapper")],p.prototype,"modelWrapper",2);m([ce(".section")],p.prototype,"sectionElements",2);m([v()],p.prototype,"currentSectionIndex",2);m([v()],p.prototype,"controlsVisible",2);m([v()],p.prototype,"sectionCallouts",2);m([v()],p.prototype,"isCalloutFading",2);m([v()],p.prototype,"isCardVisible",2);m([v()],p.prototype,"previousSectionIndex",2);p=m([j("vh-microsite-interactive-model")],p);const Ce={title:"Components/Interactive Model",component:"vh-microsite-interactive-model",tags:["autodocs"],argTypes:{modelPath:{control:"text"}}},w={render:()=>d`<div style="width: 100%; height: 600px;">
      <vh-microsite-interactive-model></vh-microsite-interactive-model>
    </div>`};w.parameters={...w.parameters,docs:{...w.parameters?.docs,source:{originalSource:`{
  render: () => html\`<div style="width: 100%; height: 600px;">
      <vh-microsite-interactive-model></vh-microsite-interactive-model>
    </div>\`
}`,...w.parameters?.docs?.source}}};const Re=["Default"];export{w as Default,Re as __namedExportsOrder,Ce as default};
